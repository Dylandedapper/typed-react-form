(this["webpackJsonptyped-react-form-example"]=this["webpackJsonptyped-react-form-example"]||[]).push([[0],{1:function(e,t,r){var n,i=r(0),a=(n=i)&&"object"===typeof n&&"default"in n?n.default:n;function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e){if(Array.isArray(e))return Array.from(Array(e.length).keys());if("object"===typeof e)return Object.keys(e);throw new Error("Can only keys() arrays and objects.")}function c(e){if(Array.isArray(e))return[].concat(e);if("object"===typeof e)return l({},e);throw new Error("Can only memberCopy() arrays and objects.")}var f=function(){function e(){this.counter=0}var t=e.prototype;return t.listen=function(e,t){this.listeners||(this.listeners={});var r=this.listeners[e];r||(r={},this.listeners[e]=r);var n=""+this.counter++;return r[n]=t,n},t.listenAny=function(e){this.anyListeners||(this.anyListeners={});var t=""+this.counter++;return this.anyListeners[t]=e,t},t.ignoreAny=function(e){this.anyListeners&&delete this.anyListeners[e]},t.ignore=function(e,t){if(this.listeners){var r=this.listeners[e];r?delete r[t]:console.warn("Ignore was called for no reason",e,t)}},t.fireMultiple=function(e,t){void 0===t&&(t=!1);for(var r=0;r<e.length;r++)this.fire(e[r],t)},t.fire=function(e,t){var r=this;if(void 0===t&&(t=!1),this.listeners){var n=this.listeners[e];n&&Object.keys(n).forEach((function(e){return n[e](t)}))}this.anyListeners&&Object.keys(this.anyListeners).forEach((function(e){return r.anyListeners[e](t)}))},e}(),d=function(e){var t,r;function n(t){var r;return(r=e.call(this)||this)._values=c(t),r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.update=function(t,r){return("object"===typeof this._values[t]||this._values[t]!==r)&&(void 0===r?Array.isArray(this._values)?this._values.splice(t,1):delete this._values[t]:this._values[t]=r,e.prototype.fire.call(this,t,!1),!0)},i.updateAll=function(t){if(this._values===t)return!1;var r=function(e,t,r){if(void 0===r&&(r="truthy"),e===t)return[];for(var n=o(e),i=o(t),a=n.length>i.length?n:i,s=[],u={},l=0;l<a.length;l++){var c=a[l],f=e[c],d=t[c];if("object"===typeof f||"object"===typeof d)if("truthy"===r)"object"===typeof f&&(f=f?u:void 0),"object"===typeof d&&(d=d?u:void 0);else if("skip"===r)continue;f!==d&&s.push(c)}return s}(this._values,t,"compare");return this._values=c(t),e.prototype.fireMultiple.call(this,r,!0),r.length>0},u(n,[{key:"values",get:function(){return this._values}}]),n}(f),v=function(){function e(t,r,n,i,a){void 0===a&&(a=!0),this.formId=e.counter++,this.validator=i,this.validateOnChange=a,this.valuesListener=new d(t),this.defaultValuesListener=new d(r),this.stateListener=new d(n),this.dirtyListener=new d({}),this.errorListener=new d({})}var t=e.prototype;return t.setState=function(e){this.stateListener.updateAll(e)},t.setStateField=function(e,t){this.stateListener.update(e,t)},t.resetAll=function(){this.setValues(this.defaultValues)},t.reset=function(e){this.setValueInternal(e,this.defaultValues[e],!1)},t.setErrors=function(e){this.errorListener.updateAll(e)},t.setError=function(e,t){this.errorListener.update(e,null!=t?t:void 0)},t.validateAll=function(){if(this.validator){var e=this.validator(this.values);this.errorListener.updateAll(e)}else console.warn("validateAll() was called on a form which does not have a validator set")},t.validate=function(e){if(this.validator){var t=this.validator(this.values);this.errorListener.update(e,t[e])}else console.warn("validate() was called on a form which does not have a validator set")},t.recalculateDirty=function(){for(var e=Object.keys(this.values),t=Object.keys(this.defaultValues),r=e.length>t.length?e:t,n=l({},this.dirtyListener.values),i=0;i<r.length;i++){var a=r[i],s=this.values[a],u=this.defaultValues[a];"object"!==typeof s&&"object"!==typeof u&&(s!==u?n[a]=!0:delete n[a])}e.length!==t.length?n._keyCount=!0:delete n._keyCount,this.dirtyListener.updateAll(n)},t.setValues=function(e,t){void 0===t&&(t=!0),e&&this.valuesListener.updateAll(e)&&(this.recalculateDirty(),t&&this.validator&&this.validateAll())},t.setDefaultValues=function(e,t){void 0===t&&(t=!0),this.defaultValuesListener.updateAll(e)&&(this.recalculateDirty(),t&&this.validator&&this.validateAll())},t.setValue=function(e,t,r){void 0===r&&(r=!1),"object"===typeof t||Array.isArray(t)?console.warn("Not setting value, value is object, use setValueInternal"):this.setValueInternal(e,t,this.defaultValuesListener.values[e]!==t,r)},t.setValueInternal=function(e,t,r,n){void 0===n&&(n=!1),(n?this.defaultValuesListener.update(e,t):this.valuesListener.update(e,t))&&(void 0!==r&&this.dirtyListener.update(e,r),this.validator&&this.validateOnChange&&this.validateAll())},u(e,[{key:"values",get:function(){return this.valuesListener.values}},{key:"defaultValues",get:function(){return this.defaultValuesListener.values}},{key:"dirtyMap",get:function(){return this.dirtyListener.values}},{key:"errorMap",get:function(){return this.errorListener.values}},{key:"dirty",get:function(){var e=this;return Object.keys(this.dirtyListener.values).some((function(t){return e.dirtyListener.values[t]}))}},{key:"error",get:function(){var e=this;return Object.keys(this.errorListener.values).some((function(t){return e.errorListener.values[t]}))}},{key:"state",get:function(){return this.stateListener.values}}]),e}();function y(e,t,r){void 0===r&&(r=!1);var n=i.useState(0)[1];return i.useEffect((function(){function i(e){r&&!e||n((function(e){return e+1}))}var a=e.valuesListener.listen(t,i),s=e.defaultValuesListener.listen(t,i),u=e.dirtyListener.listen(t,i),l=e.errorListener.listen(t,i),o=e.stateListener.listenAny(i);return function(){e.valuesListener.ignore(t,a),e.defaultValuesListener.ignore(t,s),e.dirtyListener.ignore(t,u),e.errorListener.ignore(t,l),e.stateListener.ignoreAny(o)}}),[e,t]),{value:e.values[t],defaultValue:e.defaultValues[t],dirty:e.dirtyMap[t],error:e.errorMap[t],state:e.state,form:e,setValue:function(r){return e.setValue(t,r)}}}function h(e,t){void 0===t&&(t=!1);var r=i.useState(0)[1];return i.useEffect((function(){function n(e){t&&!e||r((function(e){return e+1}))}var i=e.valuesListener.listenAny(n),a=e.defaultValuesListener.listenAny(n),s=e.dirtyListener.listenAny(n),u=e.errorListener.listenAny(n),l=e.stateListener.listenAny(n);return function(){e.valuesListener.ignoreAny(i),e.defaultValuesListener.ignoreAny(a),e.dirtyListener.ignoreAny(s),e.errorListener.ignoreAny(u),e.stateListener.ignoreAny(l)}}),[e]),e}function m(e,t){var r,n=i.useRef(null);null===n.current&&(n.current=new v(e.values[t],null!=(r=e.defaultValues[t])?r:{},e.state));return i.useEffect((function(){var r,i=e.valuesListener.listen(t,(function(){n.current.setValues(e.values[t])})),a=e.defaultValuesListener.listen(t,(function(){n.current.setDefaultValues(e.defaultValuesListener.values[t])})),s=e.dirtyListener.listen(t,(function(){n.current.dirtyListener.updateAll(e.dirtyListener.values[t]||{})})),u=e.errorListener.listen(t,(function(){n.current.errorListener.updateAll(e.errorListener.values[t]||{})})),l=e.stateListener.listenAny((function(){n.current.stateListener.updateAll(e.stateListener.values)})),o=n.current.valuesListener.listenAny((function(){e.setValueInternal(t,n.current.valuesListener.values,void 0,!1)})),c=n.current.defaultValuesListener.listenAny((function(){Object.keys(n.current.defaultValuesListener.values).length>0&&e.setValueInternal(t,n.current.defaultValuesListener.values,void 0,!0)})),f=n.current.dirtyListener.listenAny((function(){e.dirtyListener.update(t,n.current.dirty?n.current.dirtyListener.values:void 0)})),d=n.current.errorListener.listenAny((function(){e.errorListener.update(t,n.current.error?n.current.errorListener.values:void 0)}));return n.current.valuesListener.updateAll(e.values[t]),n.current.defaultValuesListener.updateAll(null!=(r=e.defaultValues[t])?r:{}),n.current.recalculateDirty(),n.current.validator&&n.current.validateAll(),function(){e.valuesListener.ignore(t,i),e.defaultValuesListener.ignore(t,a),e.dirtyListener.ignore(t,s),e.errorListener.ignore(t,u),e.stateListener.ignoreAny(l),n.current.valuesListener.ignoreAny(o),n.current.defaultValuesListener.ignoreAny(c),n.current.dirtyListener.ignoreAny(f),n.current.errorListener.ignoreAny(d)}}),[e,t]),i.useEffect((function(){return function(){e.dirtyListener.update(t,void 0),e.errorListener.update(t,void 0)}}),[]),n.current}function p(e,t){var r=m(e,t),n=i.useState(0)[1];return i.useEffect((function(){var e=r.valuesListener.listenAny((function(e){e&&n((function(e){return e+1}))}));return function(){r.valuesListener.ignoreAny(e)}}),[e,t]),{remove:function(e){var t=[].concat(r.values);t.splice(e,1),r.setValues(t)},move:function(e,t){if(t!==e){for(var n=[].concat(r.values),i=n[e],a=t<e?-1:1,s=e;s!==t;s+=a)n[s]=n[s+a];n[t]=i,r.setValues(n)}},swap:function(e,t){if(e!==t){var n=[].concat(r.values),i=[n[t],n[e]];n[e]=i[0],n[t]=i[1],r.setValues(n)}},clear:function(){r.setValues([])},append:function(e){r.setValues([].concat(r.values,[e]))},form:r}}v.counter=0,t.AnyListener=function(e){var t=h(e.form);return a.createElement(a.Fragment,null,e.children(t))},t.ArrayForm=function(e){var t=p(e.parent,e.name);return a.createElement(a.Fragment,null,e.children(t))},t.ChildForm=function(e){var t=m(e.parent,e.name);return a.createElement(a.Fragment,null,e.children(t))},t.DIRTY_KEY_COUNT_SYMBOL="_keyCount",t.Form=v,t.ListenEmitter=f,t.Listener=function(e){var t=y(e.form,e.name);return a.createElement(a.Fragment,null,e.children(t))},t.ObjectListener=d,t.useAnyListener=h,t.useArrayForm=p,t.useChildForm=m,t.useForm=function(e,t,r,n){void 0===n&&(n=!0);var a=i.useRef(null);return null===a.current&&(a.current=new v(e,e,t,r,n)),i.useEffect((function(){a.current.setDefaultValues(e)}),[e]),a.current},t.useListener=y},10:function(e,t,r){},16:function(e,t,r){"use strict";r.r(t);r(10);var n=r(0),i=r.n(n),a=r(4),s=r.n(a),u=r(2),l=r.n(u),o=r(7),c=r(5),f=r(6),d=r(8),v=r(1);function y(e){var t=Object(n.useRef)(null),r=Object(n.useRef)(null);return t.current&&(t.current.className="",r.current&&clearTimeout(r.current),r.current=window.setTimeout((function(){t.current&&(t.current.className="blink")}),100)),i.a.createElement("div",{ref:t},e.children)}function h(e){var t=e.form,r=e.name,n=Object(d.a)(e,["form","name"]),a=Object(v.useListener)(t,r),s=a.value,u=a.dirty,l=a.defaultValue,o=a.error,c=a.state;return i.a.createElement(y,null,i.a.createElement("input",Object.assign({disabled:c.isSubmitting,placeholder:l,style:{background:u?"#eee":"#fff",padding:"0.3em",fontSize:"inherit",outline:o?"4px solid #f306":"none"},value:s,onChange:function(e){return t.setValue(r,e.target.value)}},n)),o&&i.a.createElement("span",{style:{padding:"0.3em",fontWeight:"bold",color:"red"}},o))}function m(){var e=Object(n.useState)({author:"codestix",name:"My todo list",todos:Array(3).fill(0).map((function(e,t){return{message:"Fix this "+t,priority:"normal",id:t}}))}),t=Object(f.a)(e,2),r=t[0],a=t[1],s=Object(v.useForm)(r,{isSubmitting:!1},g,!0);return i.a.createElement("form",{onSubmit:function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s.validateAll(),!s.error){e.next=4;break}return e.abrupt("return");case 4:return s.setStateField("isSubmitting",!0),e.next=7,new Promise((function(e){return setTimeout(e,1e3)}));case 7:s.setStateField("isSubmitting",!1),a(Object(o.a)({},s.values));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:{padding:"1em",margin:"1em"}},i.a.createElement(y,null,i.a.createElement("h1",null,"Form created using"," ",i.a.createElement("a",{href:"https://github.com/CodeStix/typed-react-form"},"typed-react-form")),i.a.createElement("p",null,"The red flash indicates which parts of the form are being rerendered."),i.a.createElement("hr",null),i.a.createElement("h2",null,"Todo list"),i.a.createElement("p",null,"Name"),i.a.createElement(h,{form:s,name:"name"}),i.a.createElement("p",null,"Author"),i.a.createElement(h,{form:s,name:"author"}),i.a.createElement("p",null,"Todo's"),i.a.createElement(v.ArrayForm,{parent:s,name:"todos"},(function(e){var t=e.form,r=e.swap,n=e.remove,a=e.append;return i.a.createElement(y,null,i.a.createElement("ul",{style:{padding:"0"}},t.values.map((function(e,a){return i.a.createElement(p,{onMoveTop:function(){return r(a,0)},onRemove:function(){return n(a)},key:e.id,parent:t,index:a})}))),i.a.createElement("button",{style:{margin:"0 0 1em 0"},type:"button",onClick:function(){return a({message:"",priority:"normal",id:(new Date).getTime()})}},"Add item"))})),i.a.createElement(v.AnyListener,{form:s},(function(e){var t=e.state,r=e.dirty;return i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{style:{fontSize:"1.3em"},disabled:t.isSubmitting||!r},"Save"),i.a.createElement("button",{style:{fontSize:"1.3em"},disabled:t.isSubmitting||!r,type:"button",onClick:function(){return s.resetAll()}},"Reset"))})),i.a.createElement("h3",null,"Output"),i.a.createElement(L,{form:s})))}function p(e){var t=Object(v.useChildForm)(e.parent,e.index);return i.a.createElement("li",{style:{padding:"1em",margin:"1em",border:"1px solid #0003"}},i.a.createElement(y,null,i.a.createElement(h,{form:t,name:"message"}),i.a.createElement("button",{type:"button",onClick:e.onMoveTop},"Go to top"),i.a.createElement("button",{type:"button",onClick:e.onRemove},"Remove")))}function L(e){var t=Object(v.useAnyListener)(e.form);return i.a.createElement(y,null,i.a.createElement("div",{style:{background:"#0001"}},i.a.createElement("p",null,t.dirty&&i.a.createElement("strong",{style:{color:"blue"}},"DIRTY"),t.error&&i.a.createElement("strong",{style:{color:"red"}},"ERROR")),i.a.createElement("pre",null,JSON.stringify(t.values,null,2)),i.a.createElement("pre",null,JSON.stringify(t.dirtyListener.values,null,2))))}function g(e){var t=e.todos.reduce((function(e,t,r){return t.message.length<5&&(e[r]={message:"Todo message should be longer!"}),e}),{});return{author:e.author.length<3?"Author name is too short.":void 0,name:e.name.length<3?"Title is too short.":void 0,todos:Object.keys(t).length>0?t:void 0}}s.a.render(i.a.createElement(m,null),document.getElementById("root"))},9:function(e,t,r){e.exports=r(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.21a69e85.chunk.js.map