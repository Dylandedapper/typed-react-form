(this["webpackJsonptyped-react-form-example"]=this["webpackJsonptyped-react-form-example"]||[]).push([[0],{1:function(e,t,r){var n,a=r(0),i=(n=a)&&"object"===typeof n&&"default"in n?n.default:n;function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e){if(Array.isArray(e))return[].concat(e);if("object"===typeof e)return u({},e);throw new Error("Can only memberCopy() arrays and objects.")}var l=function(){function e(t,r,n,a,i){void 0===i&&(i=!0),this.formId=++e.formCounter,this.childMap={},this.dirtyMap={},this.errorMap={},this.listeners={},this.anyListeners={},this.counter=0,this.values=o(t),this.defaultValues=o(r),this._state=o(n),this.validator=a,this.validateOnChange=i}var t,r,n,a=e.prototype;return a.setValueInternal=function(e,t,r,n,a,i,s,u){var o=a?this.defaultValues:this.values;if(void 0===t?Array.isArray(o)?o.splice(e,1):delete o[e]:o[e]=t,void 0!==r&&(this.dirtyMap[e]=r),i&&void 0!==t){var l=this.childMap[e];l&&(l.setValues(t,!0,a,!0,!1),this.dirtyMap[e]=l.dirty)}this.fireListeners(e,!1),u&&(s&&this.updateParentValues(a),this.fireAnyListeners(!1)),n&&this.validateOnChange&&this.validator&&this.validate()},a.setValue=function(e,t,r,n,a,i,s){if(void 0===r&&(r=!0),void 0===n&&(n=!1),void 0===a&&(a=!0),void 0===i&&(i=!0),void 0===s&&(s=!0),"object"===typeof t)this.setValueInternal(e,t,void 0,r,n,a,i,s);else{if(n&&this.defaultValues[e]===t||!n&&this.values[e]===t)return!1;this.setValueInternal(e,t,n?t!==this.values[e]:t!==this.defaultValues[e],r,n,a,i,s)}return!0},a.setValues=function(e,t,r,n,a){void 0===t&&(t=!0),void 0===r&&(r=!1),void 0===n&&(n=!0),void 0===a&&(a=!0);for(var i=Object.keys(r?this.defaultValues:this.values),s=Object.keys(e),u=i.length>s.length?i:s,o=0;o<u.length;o++){var l=u[o];this.setValue(l,e[l],!1,r,n,a,!1)}a&&this.updateParentValues(r),this.fireAnyListeners(!0),t&&this.validateOnChange&&this.validator&&this.validate()},a.setDefaultValues=function(e,t,r,n){void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===n&&(n=!0),this.setValues(e,t,!0,r,n)},a.validate=function(){this.validator?this.setErrors(this.validator(this.values)):console.warn("validate() was called on a form which does not have a validator set.")},a.setError=function(e,t,r,n,a){var i;void 0===r&&(r=!0),void 0===n&&(n=!0),void 0===a&&(a=!0),this.errorMap[e]!==t&&(t?this.errorMap[e]=t:delete this.errorMap[e],r&&(null===(i=this.childMap[e])||void 0===i||i.setErrors(null!=t?t:{})),this.fireListeners(e,!1),a&&(n&&this.updateParentErrors(),this.fireAnyListeners(!1)))},a.setErrors=function(e,t,r){void 0===t&&(t=!0),void 0===r&&(r=!0);for(var n=Object.keys(this.errorMap),a=Object.keys(e),i=a.length>n.length?a:n,s=0;s<i.length;s++){var u=i[s];this.setError(u,e[u],t,r,!1)}r&&this.updateParentErrors(),this.fireAnyListeners(!1)},a.resetAll=function(){this.setValues(this.defaultValues)},a.reset=function(e){this.setValue(e,this.defaultValues[e])},a.setState=function(e,t,r){var n=this;void 0===t&&(t=!0),void 0===r&&(r=!0),this._state=e;var a=Object.keys(this.values);t&&a.forEach((function(a){var i;return null===(i=n.childMap[a])||void 0===i?void 0:i.setState(e,t,r)})),a.forEach((function(e){return n.fireListeners(e,!1)})),r&&this.updateParentState(),this.fireAnyListeners(!1)},a.listen=function(e,t){this.listeners||(this.listeners={});var r=this.listeners[e];r||(r={},this.listeners[e]=r);var n=""+this.counter++;return r[n]=t,n},a.listenAny=function(e){this.anyListeners||(this.anyListeners={});var t=""+this.counter++;return this.anyListeners[t]=e,t},a.ignore=function(e,t){if(this.listeners){var r=this.listeners[e];r?delete r[t]:console.warn("Ignore was called for no reason",e,t)}},a.ignoreAny=function(e){this.anyListeners&&delete this.anyListeners[e]},a.fireListeners=function(e,t){var r=this.listeners[e];r&&Object.keys(r).forEach((function(e){return r[e](t)}))},a.fireAnyListeners=function(e){var t=this;Object.keys(this.anyListeners).forEach((function(r){return t.anyListeners[r](e)}))},a.updateParentValues=function(e){},a.updateParentErrors=function(){},a.updateParentState=function(){},t=e,(r=[{key:"state",get:function(){return this._state}},{key:"dirty",get:function(){var e=this;return Object.keys(this.dirtyMap).some((function(t){return e.dirtyMap[t]}))}},{key:"error",get:function(){var e=this;return Object.keys(this.errorMap).some((function(t){return e.errorMap[t]}))}}])&&s(t.prototype,r),n&&s(t,n),e}();l.formCounter=0;var c=function(e){var t,r;function n(t,r){var n,a,i;return(i=e.call(this,null!=(n=t.values[r])?n:{},null!=(a=t.defaultValues[r])?a:{},t.state)||this).parent=t,i.name=r,i}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.updateParentValues=function(e){this.parent.setValueInternal(this.name,o(e?this.defaultValues:this.values),this.dirty,!0,e,!1,!0,!0)},a.updateParentErrors=function(){this.parent.setError(this.name,this.error?o(this.errorMap):void 0,!1,!0)},a.updateParentState=function(){this.parent.setState(o(this.state),!1,!0)},n}(l);function f(e,t){var r=a.useRef(null);return r.current||(r.current=new c(e,t)),a.useEffect((function(){var n,a;return e.childMap[t]=r.current,r.current.name=t,r.current.setValues(null!=(n=e.defaultValues[t])?n:{},!0,!0,!1,!1),r.current.setValues(null!=(a=e.values[t])?a:{},!0,!1,!0,!0),function(){e.childMap[t]===r.current&&(delete e.childMap[t],delete e.errorMap[t],delete e.dirtyMap[t])}}),[e,t]),r.current}function d(e,t){var r=a.useState(0)[1];return a.useEffect((function(){var n=e.listen(t,(function(){return r((function(e){return e+1}))}));return function(){return e.ignore(t,n)}}),[e,t]),{value:e.values[t],defaultValue:e.defaultValues[t],setValue:function(r){return e.setValue(t,r)},dirty:e.dirtyMap[t],error:e.errorMap[t],state:e.state,form:e}}function h(e,t){void 0===t&&(t=!1);var r=a.useState(0)[1];return a.useEffect((function(){var n=e.listenAny((function(e){t&&!e||r((function(e){return e+1}))}));return function(){return e.ignoreAny(n)}}),[e]),e}function m(e,t){var r=f(e,t);return h(r,!0),{remove:function(e){var t=[].concat(r.values);t.splice(e,1),r.setValues(t)},move:function(e,t){if(t!==e){for(var n=[].concat(r.values),a=n[e],i=t<e?-1:1,s=e;s!==t;s+=i)n[s]=n[s+i];n[t]=a,r.setValues(n)}},swap:function(e,t){if(e!==t){var n=[].concat(r.values),a=[n[t],n[e]];n[e]=a[0],n[t]=a[1],r.setValues(n)}},clear:function(){r.setValues([])},append:function(e){r.setValues([].concat(r.values,[e]))},form:r,values:r.values,setValues:r.setValues}}t.AnyListener=function(e){var t=h(e.form,e.onlyOnSetValues);return i.createElement(i.Fragment,null,e.children(t))},t.ArrayListener=function(e){var t=m(e.parent,e.name);return i.createElement(i.Fragment,null,e.children(t))},t.ChildForm=function(e){var t=f(e.parent,e.name);return i.createElement(i.Fragment,null,e.children(t))},t.ChildFormState=c,t.FormState=l,t.Listener=function(e){var t=d(e.form,e.name);return i.createElement(i.Fragment,null,e.children(t))},t.memberCopy=o,t.useAnyListener=h,t.useArrayListener=m,t.useChildForm=f,t.useForm=function(e,t,r,n){void 0===n&&(n=!0);var i=a.useRef(null);return i.current||(i.current=new l(e,e,t,r,n)),a.useEffect((function(){i.current.setValues(e,!0,!0)}),[e]),i.current},t.useListener=d},10:function(e,t,r){},16:function(e,t,r){"use strict";r.r(t);r(10);var n=r(0),a=r.n(n),i=r(4),s=r.n(i),u=r(2),o=r.n(u),l=r(7),c=r(5),f=r(6),d=r(8),h=r(1);function m(e){var t=Object(n.useRef)(null),r=Object(n.useRef)(null);return t.current&&(t.current.className="",r.current&&clearTimeout(r.current),r.current=window.setTimeout((function(){t.current&&(t.current.className="blink")}),100)),a.a.createElement("div",{ref:t},e.children)}function v(e){var t=e.form,r=e.name,n=Object(d.a)(e,["form","name"]),i=Object(h.useListener)(t,r),s=i.value,u=i.dirty,o=i.defaultValue,l=i.error,c=i.state;return a.a.createElement(m,null,a.a.createElement("input",Object.assign({disabled:c.isSubmitting,placeholder:o,style:{background:u?"#eee":"#fff",padding:"0.3em",fontSize:"inherit",outline:l?"4px solid #f306":"none"},value:s,onChange:function(e){return t.setValue(r,e.target.value)}},n)),l&&a.a.createElement("span",{style:{padding:"0.3em",fontWeight:"bold",color:"red"}},l))}function p(){var e=Object(n.useState)({author:"codestix",name:"My todo list",todos:Array(3).fill(0).map((function(e,t){return{message:"Fix this "+t,priority:"normal",id:t}}))}),t=Object(f.a)(e,2),r=t[0],i=t[1],s=Object(h.useForm)(r,{isSubmitting:!1},b,!0);return a.a.createElement("form",{onSubmit:function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s.validate(),!s.error){e.next=4;break}return e.abrupt("return");case 4:return s.setState({isSubmitting:!0}),e.next=7,new Promise((function(e){return setTimeout(e,1e3)}));case 7:s.setState({isSubmitting:!1}),i(Object(l.a)({},s.values));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:{padding:"1em",margin:"1em"}},a.a.createElement(m,null,a.a.createElement("h1",null,"Form created using ",a.a.createElement("a",{href:"https://github.com/CodeStix/typed-react-form"},"typed-react-form")),a.a.createElement("p",null,"The red flash indicates which parts of the form are being rerendered. Browse the source code ",a.a.createElement("a",{href:"https://github.com/CodeStix/typed-react-form/tree/master/example/src"},"here"),"."),a.a.createElement("hr",null),a.a.createElement("h2",null,"Todo list"),a.a.createElement("p",null,"Name"),a.a.createElement(v,{form:s,name:"name"}),a.a.createElement("p",null,"Author"),a.a.createElement(v,{form:s,name:"author"}),a.a.createElement("p",null,"Todo's"),a.a.createElement(h.ArrayListener,{parent:s,name:"todos"},(function(e){var t=e.form,r=e.swap,n=e.remove,i=e.append;return a.a.createElement(m,null,a.a.createElement("ul",{style:{padding:"0"}},t.values.map((function(e,i){return a.a.createElement(y,{onMoveTop:function(){return r(i,0)},onRemove:function(){return n(i)},key:e.id,parent:t,index:i})}))),a.a.createElement("button",{style:{margin:"0 0 1em 0"},type:"button",onClick:function(){return i({message:"",priority:"normal",id:(new Date).getTime()})}},"Add item"))})),a.a.createElement("div",{style:{background:"#eee"}},a.a.createElement(h.AnyListener,{form:s},(function(e){var t=e.state,r=e.dirty;return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{style:{fontSize:"1.3em",margin:"0.5em 0"},disabled:t.isSubmitting||!r},"Submit"),a.a.createElement("button",{style:{fontSize:"1.3em",margin:"0.5em 0"},disabled:t.isSubmitting||!r,type:"button",onClick:function(){return s.resetAll()}},"Reset"))})),a.a.createElement("div",null,a.a.createElement("button",{style:{fontSize:"1.3em"},type:"button",onClick:function(){return s.validate()}},"Validate"),a.a.createElement("label",null,a.a.createElement("code",null,"validateOnChange"),a.a.createElement("input",{type:"checkbox",defaultChecked:s.validateOnChange,onChange:function(e){return s.validateOnChange=e.target.checked}})))),a.a.createElement("h3",null,"Output"),a.a.createElement(g,{form:s})))}function y(e){var t=Object(h.useChildForm)(e.parent,e.index);return a.a.createElement("li",{style:{padding:"1em",margin:"1em",border:"1px solid #0003"}},a.a.createElement(m,null,a.a.createElement(v,{form:t,name:"message"}),a.a.createElement("button",{type:"button",onClick:e.onMoveTop},"Go to top"),a.a.createElement("button",{type:"button",onClick:e.onRemove},"Remove")))}function g(e){var t=Object(h.useAnyListener)(e.form);return a.a.createElement(m,null,a.a.createElement("div",{style:{background:"#0001"}},a.a.createElement("p",null,t.dirty&&a.a.createElement("strong",{style:{color:"blue"}},"DIRTY"),t.error&&a.a.createElement("strong",{style:{color:"red"}},"ERROR")),a.a.createElement("pre",null,JSON.stringify(t.values,null,2)),a.a.createElement("pre",null,JSON.stringify(t.errorMap,null,2)),a.a.createElement("pre",null,JSON.stringify(t.dirtyMap,null,2))))}function b(e){var t=e.todos.reduce((function(e,t,r){return t.message.length<5&&(e[r]={message:"Todo message should be longer!"}),e}),[]);return{author:e.author.length<3?"Author name is too short.":void 0,name:e.name.length<3?"Title is too short.":void 0,todos:t.length>0?t:void 0}}s.a.render(a.a.createElement(p,null),document.getElementById("root"))},9:function(e,t,r){e.exports=r(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.381f85db.chunk.js.map